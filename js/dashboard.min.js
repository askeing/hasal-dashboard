"use strict";function getParameter(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}}function cleanContainer(){$("#result_list").empty()}function setupDefaultContainer(){var a='<div class="well">Please select the OS and Target...</div>';$("#result_list").html(a)}function addAlertToContainer(a,b){var c='<div class="alert alert-danger" role="alert">Cannot get '+a+" "+b+"</div>";$("#result_list").append(c)}function checkInputParameters(a,b,c,d,e){if(a){if(!($.inArray(a,os_list)>-1))return void addAlertToContainer("OS",a);if(selectOS(a),b){if(!($.inArray(b,target_dict[a])>-1))return void addAlertToContainer("Target",b);selectTarget(a,b)}}}function createTableToContainer(){var a='<table class="table table-bordered table-striped sortable" id="result-table"></table>';$("#result_list").html(a)}function generateResult(a){cleanContainer(),createTableToContainer();var b=["Comment","WebApp","Test","Browser","Version","Platform","Median(ms)","Sigma","Mean(ms)","Video","Profile"],c=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!1],d=["comment","webappname","test","browser","version","platform","median_value","sigma_value","mean_value","video_path","profile_path"],e=$("<thead></thead>"),f=$("<tr></tr>");e.append(f);for(var g=0;g<b.length;g++)c[g]?f.append("<th>"+b[g]+"</th>"):f.append('<th data-defaultsort="disabled">'+b[g]+"</th>");$("#result-table").append(e);var h=$("<tbody></tbody>");$.each(a,function(a,b){for(var c=$("<tr></tr>"),e=0;e<d.length;e++)if("string"==typeof d[e])c.append("<td>"+b[d[e]]+"</td>");else{for(var f=$("<td></td>"),g=0;g<d[e].length;g++)f.append("<p>"+b[d[e][g]]+"</p>");c.append(f)}h.append(c)}),$("#result-table").append(h),$.bootstrapSortable(!0)}function selectTarget(a,b){$("#btn-target-label").text(b),console.log(result_dict[a][b]),generateResult(result_dict[a][b])}function addTargetButtonsAction(){$("ul#btn-target-selection li").click(function(){var a=$("#btn-os-label").text(),b=(this.id,$(this).text());selectTarget(a,b)})}function selectOS(a){$("#btn-os-label").text(a),$("#target-menu").removeClass("disabled"),cleanTargetButtons();for(var b=0;b<target_dict[a].length;b++)addTargetButtons(target_dict[a][b]);addTargetButtonsAction(),cleanContainer(),setupDefaultContainer()}function addOSButtonsAction(){$("ul#btn-os-selection li").click(function(){var a=(this.id,$(this).text());selectOS(a)})}function addOSButtons(a){if(null!=a){var b="os-"+a,c='<li id="'+b+'"><a href="#">'+a+"</a></li>";$("ul#btn-os-selection").append(c)}}function cleanTargetButtons(){$("ul#btn-target-selection").empty(),$("#btn-target-label").text("Select Target")}function addTargetButtons(a){if(null!=a){var b="lang-"+a,c='<li id="'+b+'"><a href="#">'+a+"</a></li>";$("ul#btn-target-selection").append(c)}}function compareResultArray(a,b){if(a.comment<b.comment)return-1;if(a.comment>b.comment)return 1;if(a.comment==b.comment){if(a.webappname<b.webappname)return-1;if(a.webappname>b.webappname)return 1;if(a.webappname==b.webappname){if(a.test<b.test)return-1;if(a.test>b.test)return 1;if(a.test==b.test){if(a.browser<b.browser)return-1;if(a.browser>b.browser)return 1;if(a.browser==b.browser)return 0}}}return 0}function generateOsAndTarget(a){data=a,os_list=Object.keys(data);for(var b in data){target_dict[b]=new Array,result_dict[b]=new Object,addOSButtons(b);var c=data[b],d=Object.keys(c);target_dict[b]=d;for(var e in c){result_dict[b][e]=new Array;var f=c[e];for(var g in f){var h=f[g];for(var i in h){var j=h[i];for(var k in j){var l=j[k];l.test=l.test.replace(/test_firefox_/g,"").replace(/test_chrome_/g,""),l.median_value=Number(l.median_value).toFixed(2),l.sigma_value=Number(l.sigma_value).toFixed(2),l.mean_value=Number(l.mean_value).toFixed(2),l.mean_value=Number(l.mean_value).toFixed(2),l.video_path&&(l.video_path='<iframe class="embed-responsive-item" src="'+l.video_path+'" width="320" height="240"></iframe>'),result_dict[b][e].push(l)}}}result_dict[b][e].sort(compareResultArray)}}addOSButtonsAction(),$("#btn-container button").tooltip()}var data=new Object,os_list=[],target_dict=new Object,result_dict=new Object;$(document).ready(function(){var a=getParameter("os"),b=getParameter("target"),c=getParameter("comment"),d=getParameter("test"),e=getParameter("webapp");setupDefaultContainer(),$.getJSON("config/data.json",function(f){generateOsAndTarget(f),checkInputParameters(a,b,c,d,e)})});